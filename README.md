# Telegram-бот для английского клуба

Простой бот для автоматизированного знакомства с новыми участниками английского клуба.

## Возможности

✅ **Диалоговый сценарий знакомства:**
1. Приветствие и получение согласия на обработку данных
2. Запрос имени участника
3. Вопрос об опыте изучения английского
4. Запрос возраста
5. Предложение подписаться на рассылку

✅ **Функции:**
- Сбор и хранение данных участников в SQLite базе
- Отправка документов (СНАОП, согласия на рассылку)
- Простая статистика для администратора
- Соблюдение требований по обработке персональных данных

## Установка и запуск

### 1. Создание бота в Telegram

1. Найдите [@BotFather](https://t.me/BotFather) в Telegram
2. Отправьте команду `/newbot`
3. Следуйте инструкциям для создания бота
4. Сохраните полученный токен

### 2. Настройка окружения

```bash
# Установите Python 3.8+ если не установлен

# Установите зависимости
pip install -r requirements.txt

# Создайте файл с переменными окружения
cp .env.example .env

# Отредактируйте .env файл и укажите ваш BOT_TOKEN
```

### 3. Запуск бота

```bash
# Установите токен как переменную окружения
export BOT_TOKEN="ваш_токен_от_BotFather"

# Запустите бота
python bot.py
```

Или на Windows:
```cmd
set BOT_TOKEN=ваш_токен_от_BotFather
python bot.py
```

## Использование

### Для участников:
- `/start` - начать регистрацию
- `/cancel` - отменить текущую регистрацию

### Для администраторов:
- `/admin` - посмотреть статистику участников

## Структура файлов

```
simple_tg_bot/
├── bot.py                          # Основной код бота
├── requirements.txt                # Зависимости Python
├── .env.example                    # Пример файла с переменными
├── README.md                       # Эта инструкция
├── english_club.db                 # База данных (создается автоматически)
├── СнаОП с прочерками.pdf         # Согласие на обработку данных
└── Согласие_на_рассылку_...pdf    # Согласие на рассылку
```

## База данных

Бот автоматически создает SQLite базу данных `english_club.db` со следующей структурой:

```sql
CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    telegram_id INTEGER UNIQUE NOT NULL,
    username TEXT,
    name TEXT NOT NULL,
    age INTEGER,
    english_experience TEXT,
    data_consent BOOLEAN DEFAULT 0,
    newsletter_consent BOOLEAN DEFAULT 0,
    registration_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## Диалоговый сценарий

1. **Приветствие**: Бот приветствует пользователя и запрашивает согласие на обработку данных
2. **Имя**: Получает имя участника
3. **Опыт**: Узнает, изучал ли участник английский ранее
4. **Возраст**: Запрашивает возраст
5. **Рассылка**: Предлагает подписаться на новости клуба

## Безопасность

- ✅ Получение явного согласия на обработку персональных данных
- ✅ Отдельное согласие на получение рассылки
- ✅ Локальное хранение данных в SQLite
- ✅ Возможность отказа от обработки данных

## Поддержка

При возникновении вопросов или проблем:
1. Проверьте правильность токена бота
2. Убедитесь, что все зависимости установлены
3. Проверьте логи в консоли

## Лицензия

Этот проект создан для английского клуба и может быть свободно использован и модифицирован.